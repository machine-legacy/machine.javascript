<html>
  <head>
    <title>machine.javascript example</title>
    <script src="../lib/jquery/jquery-1.3.1.js"></script>
    <script src="../includer/src/machine-includer.js"></script>
    <style>
      .header { background-color: #ffcc00; width: 100%; height 200px; padding: 10px 10px 10px 10px }
    </style>
  </head>
  <body>
    <script>
      Machine.Includer.configure({scriptLocations : {'.*':''}});

      $(function() {
        include.load();
        
        $('.example_button').click(function(e) {
          var textareaId = $(e.currentTarget).attr('textarea');
          var containerId = $(e.currentTarget).attr('container');
          var containerDiv = $('#'+containerId);
          containerDiv.empty();
          var taText = $('#'+textareaId).val();
          eval(taText);
          include.load();
        });
      });

    </script>
    <div class="header"><h1>machine-controller.js example</h1></div>
    <div class="content">
      <h3>Simple example</h3>
      <p>
        Here's an example of a simple controller that attaches to a container div and renders some static content:
      </p>
      <textarea rows="13" cols="80" id="simple_example">
// controller definition
include('../controller/machine-controller.js');
include('default-view-renderer.js');
include(function() {
  var global = this;
  
  // controller initializer
  global.SimpleExampleController = function() {
    this.model.view = "<div>hello world from SimpleExampleController!</div>";
    this.setView("", "Default"); // a minimalist view that renders
                                 // whatever is in this.model.content
  };
  global.SimpleExampleController.prototype = new Machine.Controller();
});

// instantiating the controller
include(function() {
  var sec = new SimpleExampleController();
  // update the controller's rendered markup
  sec.render();
  
  // attach that markup to the document's DOM at some location
  $('#simple_example_container').append(sec.domRoot);
});
      </textarea><br />
      <input type="submit" value="Do it" class="example_button" textarea="simple_example" container="simple_example_container"/>
      <div id="simple_example_container"></div>
    </div>
  </body>
</html>
